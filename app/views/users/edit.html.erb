<% content_for :page_div do %>
  <div class="page" data-role="page" data-fullscreen="true" id="user_edit_page">
<% end %>
<% content_for :heading do %>
  <%= link_to "Back", "#", "data-rel" => "back", "data-icon" => "back",
                "data-role" => "button", "class" => "ui-btn-left" %>
  <%= link_to "Sign out", signout_path, method: "delete",
                "data-role" => "button", "class" => "ui-btn-right",
                data: { confirm: "If you haven't set your email and password you won't be able to log in again and you will loose all your data. \nStill want to sign out ?" } %>
    
  <h1>Edit user</h1>
<% end %>

<%= form_for @user,  html: { :'data-ajax' => 'false'} do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <fieldset>
    <div data-role="fieldcontain">
      <%= f.label :name, "User name:" %>
      <br>
      <%= f.text_field :name, placeholder: "User name", id: "edit_user_name" %>
    
      <%= f.label :email, "Email:" %>
      <br>
      <%= f.email_field :email, placeholder: "Email", id: "edit_user_email" %>
    </div>
    <div data-role="collapsible">
      <h2>Change password</h2>
      <div data-role="fieldcontain">
        <%= f.password_field :password, placeholder: "Password", id: "edit_user_psw" %>
      </div>
      <div data-role="fieldcontain">
        <%= f.password_field :password_confirmation, placeholder: "Password confirmation", id: "edit_user_pswconf" %>
      </div>
    </div>
    
    <%= f.submit "Save changes" %>
  </fieldset>
  <div data-role="content">
    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change image</a>
  </div>
<% end %>

<%= render :partial => 'layouts/footer', :locals => { :footer_tab => 'profile' } %>